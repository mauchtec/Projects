<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps API Example</title>
    <style>
      #map {
        height: 400px;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div>
      <label for="start">Start:</label>
      <input type="text" id="start" placeholder="Enter start address">
      <label for="destination">Destination:</label>
      <input type="text" id="destination" placeholder="Enter destination address">
      
      <br>
      <label for="distance">Distance:</label>
      <input type="text" id="distance" readonly>
    </div>
    <div id="map"></div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDErtDDwYgoI_L6619pr0wNeBnitQvmFb0&libraries=places&callback=initMap" async defer></script>
    <script>
      var map;
      var directionsService;
      var directionsRenderer;
      var startAutocomplete;
      var destinationAutocomplete;

      function initMap() {
        // Initialize the map
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 37.7749, lng: -122.4194}, // Default center coordinates (San Francisco)
          zoom: 13 // Default zoom level
        });

        // Initialize the Directions Service and Directions Renderer
        directionsService = new google.maps.DirectionsService();
        directionsRenderer = new google.maps.DirectionsRenderer();
        directionsRenderer.setMap(map);

        // Initialize the Autocomplete fields
        startAutocomplete = new google.maps.places.Autocomplete(document.getElementById('start'));
        destinationAutocomplete = new google.maps.places.Autocomplete(document.getElementById('destination'));

        // Add event listener for place changed event on destination Autocomplete
        destinationAutocomplete.addListener('place_changed', calculateDistance);
      }

      function calculateDistance() {
        var start = document.getElementById('start').value;
        var destination = document.getElementById('destination').value;

        var request = {
          origin: start,
          destination: destination,
          travelMode: 'DRIVING' // Other options: 'WALKING', 'BICYCLING', 'TRANSIT'
        };

        directionsService.route(request, function(result, status) {
          if (status == 'OK') {
            directionsRenderer.setDirections(result);
            var distance = result.routes[0].legs[0].distance.text;
            document.getElementById('distance').value = distance;
          } else {
            console.log('Error:', status);
          }
        });
      }
    </script>
  </body>
</html>
